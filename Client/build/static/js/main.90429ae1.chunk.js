(this.webpackJsonpclinet=this.webpackJsonpclinet||[]).push([[6],{22:function(e,t,n){"use strict";var r=n(44),a=n.n(r).a.create({baseURL:"https://wfm-toolkit.herokuapp.com/api"});t.a=a},27:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return p}));var r=n(6),a=n(22),o=n(14),c=function(){return{type:r.f}},u=function(e,t){return{type:r.b,token:e,userId:t}},i=function(e){return{type:r.a,error:e}},s=function(){return{type:r.d}},l=function(e,t,n,o){return function(u){var s={name:e,email:t,password:n,confirmPassword:o};u(c()),a.a.post("/auth/signup",s).then((function(e){var t;console.log(e),200===e.status&&u((t=e.data.message,{type:r.e,message:t}))})).catch((function(e){console.log(e.response.data),u(i(j(e.response.data)[0]))}))}},d=function(e){return function(t){var n;clearTimeout(n),n=setTimeout((function(){o.b.info("Your session has expired",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),t(h())}),e)}},h=function(){return function(e){localStorage.removeItem("token"),localStorage.removeItem("expiryDate"),localStorage.removeItem("userId"),e({type:r.c})}},b=function(e,t){return function(n){var r={email:e,password:t};n(c()),a.a.post("/auth/login",r).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.userId);var t=36e5,r=new Date((new Date).getTime()+t);localStorage.setItem("expiryDate",r.toISOString()),n(u(e.data.token,e.data.userId)),n(d(t)),o.b.success("Loged in successfully \ud83d\ude0a",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){console.log(e.response.data),n(i(j(e.response.data)[0]))}))}},f=function(){return function(e){var t=localStorage.getItem("token"),n=localStorage.getItem("expiryDate");if(t&&n)if(new Date(n)<=new Date)e(h());else{var r=localStorage.getItem("userId"),a=new Date(n).getTime()-(new Date).getTime();e(u(t,r)),e(d(a))}}},p=function(e){var t="/login"===e?null:e;return function(e){e(function(e){return{type:r.h,path:e}}(t))}},j=function(e){return e.results.map((function(e){return e.msg}))}},52:function(e,t,n){},6:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return l}));var r="AUTH_START",a="AUTH_SIGINUP_SUCCESS",o="AUTH_LOGIN_SUCCESS",c="AUTH_RESET_STATE",u="AUTH_FAILED",i="AUTH_LOGOUT",s="CHECK_USER",l="SET_PATH"},76:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(13),c=n.n(o),u=(n(52),n(4)),i=n(17),s=n(18),l=n(20),d=n(19),h=n(14),b=n(5),f=(n(53),n(82)),p=[{path:"/home",exact:!0,name:"Dashboard",component:a.a.lazy((function(){return Promise.all([n.e(0),n.e(8),n.e(19)]).then(n.bind(null,549))}))},{path:"/scheduler",exact:!0,name:"Scheduler",component:a.a.lazy((function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(9),n.e(21)]).then(n.bind(null,550))}))},{path:"/scheduler/search",exact:!0,name:"Calendar",component:a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(11),n.e(20)]).then(n.bind(null,552))}))},{path:"/holiday/me",exact:!0,name:"Holiday",component:a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(5),n.e(17)]).then(n.bind(null,558))}))},{path:"/setting",exact:!0,name:"Settings",component:a.a.lazy((function(){return Promise.all([n.e(0),n.e(5),n.e(16)]).then(n.bind(null,562))}))}],j=n(1),m=a.a.lazy((function(){return Promise.all([n.e(0),n.e(4),n.e(18)]).then(n.bind(null,560))})),O=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).loading=function(){return Object(j.jsx)("div",{className:"animated fadeIn pt-1 text-center",children:"Loading..."})},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsxs)(a.a.Fragment,{children:[Object(j.jsx)(r.Suspense,{fallback:this.loading(),children:Object(j.jsx)(m,{})}),Object(j.jsx)("main",{children:Object(j.jsx)(f.a,{fluid:!0,children:Object(j.jsx)(r.Suspense,{fallback:this.loading(),children:Object(j.jsxs)(b.d,{children:[p.map((function(t,n){return t.component?Object(j.jsx)(b.b,{path:t.path,exact:t.exact,name:t.name,render:function(n){return console.log("update route =>",e.props),Object(j.jsx)(t.component,Object(u.a)({},n))}},n):null})),Object(j.jsx)(b.a,{from:"/login",to:this.props.path?this.props.path:"/home"}),Object(j.jsx)(b.a,{from:"/",to:"/home"})]})})})})]})}}]),n}(r.Component),g=n(21),x=n(27),v=(n(76),a.a.lazy((function(){return Promise.all([n.e(1),n.e(13)]).then(n.bind(null,542))}))),S=a.a.lazy((function(){return Promise.all([n.e(1),n.e(14)]).then(n.bind(null,543))})),y=a.a.lazy((function(){return Promise.all([n.e(1),n.e(15)]).then(n.bind(null,544))})),I=a.a.lazy((function(){return Promise.all([n.e(0),n.e(4),n.e(12)]).then(n.bind(null,557))})),k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={redirect:!1},e.loading=function(){return Object(j.jsx)("div",{className:"animated fadeIn pt-1 text-center",children:"Loading..."})},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.checkSession(),!0!==this.props.isAuthintacted&&(this.props.setPath(this.props.location.pathname+this.props.location.search),this.setState({redirect:!0}))}},{key:"render",value:function(){return Object(j.jsxs)(a.a.Suspense,{fallback:this.loading(),children:[Object(j.jsx)(h.a,{}),!0===this.props.isAuthintacted?Object(j.jsx)(b.b,{path:"/",name:"Home",render:function(e){return Object(j.jsx)(O,Object(u.a)({},e))}}):Object(j.jsxs)(b.d,{children:[Object(j.jsx)(b.b,{exact:!0,path:"/home",name:"Home Page",render:function(e){return Object(j.jsx)(I,Object(u.a)({},e))}}),Object(j.jsx)(b.b,{exact:!0,path:"/login",name:"Login Page",render:function(e){return Object(j.jsx)(v,Object(u.a)({},e))}}),Object(j.jsx)(b.b,{exact:!0,path:"/register",name:"Register Page",render:function(e){return Object(j.jsx)(S,Object(u.a)({},e))}}),Object(j.jsx)(b.b,{exact:!0,path:"/reset",name:"Reset Page",render:function(e){return Object(j.jsx)(y,Object(u.a)({},e))}}),!0===this.state.redirect?Object(j.jsx)(b.a,{to:"/home"}):null]})]})}}]),n}(r.Component),P=Object(g.b)((function(e){return{isAuthintacted:null!=e.auth.token}}),(function(e){return{checkSession:function(){return e(x.b())},setPath:function(t){return e(x.e(t))}}}))(k),T=function(e){e&&e instanceof Function&&n.e(23).then(n.bind(null,556)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},C=(n(77),n(23)),_=(n(78),n(16)),w=n(45),A=n(6),D={token:null,userId:null,error:null,loading:!1,redirect:!1,message:null,userInfo:null,pathCallback:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.f:return Object(u.a)(Object(u.a)({},e),{},{error:null,loading:!0,redirect:!1});case A.a:return Object(u.a)(Object(u.a)({},e),{},{error:t.error,loading:!1,redirect:!1});case A.d:return Object(u.a)(Object(u.a)({},e),{},{error:null,loading:!1,redirect:!1,message:null});case A.e:return Object(u.a)(Object(u.a)({},e),{},{error:null,loading:!1,redirect:!0,message:t.message});case A.b:return Object(u.a)(Object(u.a)({},e),{},{error:null,loading:!1,token:t.token,userid:t.userId});case A.c:return Object(u.a)(Object(u.a)({},e),{},{token:null,userId:null});case A.g:return Object(u.a)(Object(u.a)({},e),{},{userInfo:t.user});case A.h:return Object(u.a)(Object(u.a)({},e),{},{pathCallback:t.path});default:return e}},H=(n(79),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_.c),U=Object(_.b)({auth:E}),L=Object(_.d)(U,H(Object(_.a)(w.a)));c.a.render(Object(j.jsx)(g.a,{store:L,children:Object(j.jsx)(C.a,{children:Object(j.jsx)(b.b,{path:"/",component:P})})}),document.getElementById("root")),T()}},[[80,7,10]]]);
//# sourceMappingURL=main.90429ae1.chunk.js.map